#!/bin/sh

main() {
	result=0

	echo 'fizzbuzz test'

	if [ -n "$1" ] && [ -x "$1" ]
	then
		test "$1"
	else
		for filename in fizzbuzz.*
		do
			test "$filename"
		done
	fi

	return $result
}

test() {
	name="$1"
	ext="$( echo "$name" | grep -Eo '\.[^\.]+$' | tr -d '.' )"
	[ -z "$ext" ] && return 1
	printf '%s ' "$ext"
	if "./$name" | diff --strip-trailing-cr - expected > /dev/null 2>&1
	then
		printf %s pass
	else
		printf %s fail
		result=1
	fi
	printf '\n'
}

main "$@"
